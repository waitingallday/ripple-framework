import J from"./DocsContentNavigation.151e1c74.js";import Q from"./DocsPageHeader.da5bd846.js";import{a as O,a3 as H,r,I as P,f as W,h as X,L as K,a6 as Y,o as g,i as R,k as u,t as D,N as Z,ay as ee,a2 as te,F as U,J as E,j as N,az as _,l as se,m as h,P as ne,aA as p,ar as ae,q as oe,Q as le,c as F,w as v,u as x,U as re,A as ue}from"./entry.76afd329.js";import{o as ie}from"./index.1d0b22c4.js";import"./constants.bd7ca14c.js";import{_ as ce}from"./RplIcon.vue.c671de53.js";import{_ as pe}from"./RplPromoCard.vue.678dc7f7.js";import fe from"./DocsCardGrid.bb363653.js";import{_ as de}from"./AppSidebarLayout.vue.bd64128a.js";import{_ as me}from"./AppLayout.vue.1663b334.js";import{u as _e}from"./asyncData.11ffffb2.js";import{u as ve}from"./head.b9491f4e.js";import"./useDocsNavigation.a989b29c.js";import"./RplLink.vue.2e5c3afc.js";import"./RplExpandable.vue.d562a7c4.js";import"./DocsNavLink.6b39cf7c.js";import"./nuxt-link.6e7d6a0d.js";import"./ready.44143dfc.js";import"./config.80d459c0.js";import"./DocsLink.9052a981.js";import"./RplTextLink.css.e16040dc.js";import"./RplImage.css.217b04d2.js";import"./RplList.vue.7084ff99.js";const he=["onSubmit"],ge=["onKeydown"],be=["for"],ye=["id","aria-owns","aria-expanded"],we=["id"],Se=["id","data-option-id","onKeydown","onClick"],$e={class:"rpl-search-bar__right"},xe={type:"submit","aria-label":"search",class:"rpl-search-bar-submit rpl-u-focusable-inline"},Re=u("span",{class:"rpl-search-bar-submit__label rpl-type-label rpl-type-weight-bold"},"Search",-1),Te={class:"rpl-search-bar-submit__icon"},Ie={inheritAttrs:!1},Ae=O({...Ie,__name:"RplSearchBar",props:{variant:{default:"default"},id:{},autoFocus:{type:Boolean,default:!1},inputLabel:{default:"Search"},inputValue:{default:""},suggestions:{default:()=>[]},maxSuggestionsDisplayed:{default:10}},emits:["onSubmit","update:inputValue"],setup(L,{emit:l}){const a=L,f="rpl-search-bar/onSubmit";H.register(f);const i=r(""),B=r(null),d=r(null),T=r(null),m=r([]),I=r(null),w=P(()=>`${a.id}__menu`),o=r(!1),n=r(null);W(()=>{a.autoFocus&&(I.value=setTimeout(()=>d.value.focus(),100))}),X(()=>{clearTimeout(I.value)}),ie(B,()=>{b(!1)});const V=()=>{H.emit(f,i.value),l("onSubmit",i.value)},k=e=>{i.value=e.target.value,l("update:inputValue",e.target.value),o.value=!0},S=(e,t)=>{t&&d.value.focus(),i.value=e,l("update:inputValue",e),l("onSubmit",e),o.value=!1},$=()=>a.suggestions[0],C=(e=!1)=>{var t;o.value=!0,e&&((t=a.suggestions)!=null&&t.length)&&(n.value=$())},b=(e=!1)=>{o.value=!1,n.value=null,e&&d.value.focus()},c=()=>{const e=a.suggestions.findIndex(t=>t===n.value);e<0?n.value=$():e<a.suggestions.length-1&&(n.value=a.suggestions[e+1])},A=()=>{const e=a.suggestions.findIndex(t=>t===n.value);e<0?n.value=$():e>0&&(n.value=a.suggestions[e-1])},z=e=>e>47&&e<58||e===32||e===8||e>64&&e<91||e>95&&e<112||e>185&&e<193||e>218&&e<223,q=e=>{z(e.keyCode)&&d.value.focus()},j=e=>n.value===e,G=e=>{const t=m.value.find(y=>y.dataset.optionId===e),s=T.value;if(s.scrollHeight>s.clientHeight){let y=s.clientHeight+s.scrollTop,M=t.offsetTop+t.offsetHeight;M>y?s.scrollTop=M-s.clientHeight:t.offsetTop<s.scrollTop&&(s.scrollTop=t.offsetTop)}t&&t.focus()};return K(()=>a.inputValue,e=>{i.value=e},{immediate:!0}),K(n,async e=>{e!==null&&(await Y(),G(e))}),(e,t)=>(g(),R("form",{class:N(`rpl-search-bar rpl-search-bar--${e.variant}`),style:ne({"--local-max-items":e.maxSuggestionsDisplayed}),onSubmit:p(V,["prevent"])},[u("div",{ref_key:"containerRef",ref:B,class:"rpl-search-bar__input-wrap",onKeydown:[_(p(c,["prevent"]),["down"]),_(p(A,["prevent"]),["up"]),t[2]||(t[2]=_(p(s=>b(!0),["prevent"]),["esc"])),t[3]||(t[3]=_(p(s=>b(!1),["exact"]),["tab"])),t[4]||(t[4]=_(p(s=>b(!1),["shift"]),["tab"]))]},[u("label",{class:"rpl-u-visually-hidden",for:e.id},D(e.inputLabel),9,be),Z(u("input",te(e.$attrs,{id:e.id,ref_key:"inputRef",ref:d,"onUpdate:modelValue":t[0]||(t[0]=s=>i.value=s),"aria-owns":w.value,autocomplete:"off","aria-autocomplete":"list","aria-expanded":o.value,role:"combobox",class:{"rpl-search-bar__input":!0,"rpl-u-focusable-outline":!0,"rpl-u-focusable-outline--no-border":!0,"rpl-u-focusable--force-on":o.value},type:"search",onInput:k,onFocus:t[1]||(t[1]=s=>C(!1))}),null,16,ye),[[ee,i.value]]),e.suggestions.length&&o.value?(g(),R("div",{key:0,id:w.value,ref_key:"menuRef",ref:T,class:"rpl-search-bar__menu",role:"listbox",tabindex:"-1"},[(g(!0),R(U,null,E(e.suggestions,s=>(g(),R("div",{id:s,key:s,ref_for:!0,ref_key:"optionRefs",ref:m,"data-option-id":s,role:"option",class:N({"rpl-search-bar__menu-option":!0,"rpl-u-focusable-block":!0,"rpl-u-focusable--force-on":j(s)}),tabindex:"-1",onKeydown:[_(p(y=>S(s,!0),["prevent"]),["space"]),_(p(y=>S(s,!0),["prevent"]),["enter"]),q],onClick:y=>S(s,!1)},D(s),43,Se))),128))],8,we)):se("",!0)],40,ge),u("div",$e,[u("button",xe,[Re,u("span",Te,[h(ce,{name:"icon-search",size:"m"})])])])],46,he))}});const Be={class:"rpl-u-margin-b-8"},Ze=O({__name:"module-listing",async setup(L){let l,a;const{page:f}=ae();ve(f);const d=oe().params.slug[0]==="framework",{data:T}=([l,a]=le(async()=>_e("module-listing",async()=>await ue().where({isModuleInfo:{$eq:!0}}).find())),l=await l,a(),l),m=r(""),I=P(()=>(T.value||[]).filter(w=>{const o=w.name.toLowerCase(),n=m.value.toLowerCase();return o.includes(n)}));return(w,o)=>{const n=J,V=Q,k=Ae,S=pe,$=fe,C=de,b=me;return g(),F(b,{theme:d?"module":"default"},{menuContents:v(()=>[h(n)]),default:v(()=>[h(C,{hideMobileSidebar:""},{aside:v(()=>[h(n)]),pageHeader:v(()=>[h(V,{title:x(f).title,description:x(f).description,links:x(f).links},null,8,["title","description","links"]),u("div",Be,[h(k,{id:"listing-search",inputValue:x(m),"onUpdate:inputValue":o[0]||(o[0]=c=>re(m)?m.value=c:null)},null,8,["inputValue"])])]),default:v(()=>[h($,null,{default:v(()=>[(g(!0),R(U,null,E(x(I),c=>{var A;return g(),F(S,{key:c._path,title:c.name,url:`${(A=c._path)==null?void 0:A.replace(/\/_module$/,"")}`},{default:v(()=>[u("p",null,D(c.description),1)]),_:2},1032,["title","url"])}),128))]),_:1})]),_:1})]),_:1},8,["theme"])}}});export{Ze as default};
